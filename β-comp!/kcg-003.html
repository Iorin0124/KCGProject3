<!--  kcg-003 = IBM370/138･158 (IBM：大型・汎用コンピュータ) -->

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 全ての画面サイズには対応できないが、ある程度の規格には対応,縦表示,横表示に応じて画面レイアウトを調整している -->
  <link rel="stylesheet" href="./css/padding&margin.css">
  <link rel="stylesheet" href="./css/drawing-sp.css" media="screen and (max-width:980px)">
  <link rel="stylesheet" href="./css/drawing-pc.css" media="screen and (min-width:981px)">
  <link rel="stylesheet" href="./css/drawer.min.css">
  <script src="./js/three.min.js"></script>
  <script src="./js/OrbitControls.js"></script>
  <script src="./js/jquery-3.1.1.min.js"></script>
  <script src="./js/iscroll.js"></script>
  <script src="./js/drawer.min.js"></script>
  <title>IBM370/158</title>
</head>

<body class="drawer drawer--left">

  <!-- 操作説明 -->
  <h3 id="title" class="margin-00 padleft-03 padleft-01 bg-cream">京の情報処理技術遺産</h3>
  <div id="divspace01">
    <input type="radio" class="checkbox" checked="checked" id="radio-manual" name="radio">
    <label id="op_label" for="radio-manual">操作方法</label>
    <div id="operation-manual">
      <p>操作方法<br>
        スクロールで回転<br>
        ピンチイン,ピンチアウトで拡大縮小<br>
        2本指スクロールで位置移動<br>
        左上のメニューアイコンから各種機能へ</p>
      </div>
    </div>

    <!-- パソコンの説明 -->
    <div id="divspace02">
      <input type="radio" class="checkbox" id="radio-description" name="radio">
      <label id="desc_label" for="radio-description">説明</label>
      <div id="description">
        <p><strong>IBM370/158</strong><br />
          メーカー：IBM社(米)　製造年：1975年<br />
          使用校舎：洛北校,京都駅前校<br />
          <a href="https://www.kcg.ac.jp/museum/computer/mainframe_computers/ibm.html">kcgコンピュータミュージアム：IBM370/158</a><br />
          <!-- <a href="http://museum.ipsj.or.jp">情報処理学会 コンピュータ博物館：ページ無し</a><br /> -->
          <a href="https://www.ibm.com/jp-ja/?lnk=m">メーカー：日本IBM</a><br />
          <a href="https://www.ibm.com/us-en/?lnk=m">メーカー：IBM United Status</a><br />
        </p>
      </div>
    </div>

    <!-- 非表示 -->
    <div id="divspace03">
      <input type="radio" class="checkbox" id="radio-hide" name="radio">
      <label id="hide_label" for="radio-hide">非表示</label>
    </div>

    <!-- ドロワーメニュー -->
    <button type="button" class="drawer-toggle drawer-hamburger">
      <span class="sr-only">toggle navigation</span>
      <span class="drawer-hamburger-icon"></span>
    </button>
    <nav class="drawer-nav">
      <ul class="drawer-menu" id="drawer-space">
        <li><input type="radio" id="radio-bgcolor1" name="radio_bgcolor" value="#fff8dc" checked="checked"><label for="radio-bgcolor1" id="bgcolor1">背景色1</label></li>
        <li><input type="radio" id="radio-bgcolor2" name="radio_bgcolor" value="#f0f8ff"><label for="radio-bgcolor2" id="bgcolor2">背景色2</label></li>
        <li><input type="radio" id="radio-bgcolor3" name="radio_bgcolor" value="#000000"><label for="radio-bgcolor3" id="bgcolor3">背景色3</label></li>
        <!-- <li><a class="link" href="./camera.html">スキャン</a></li> -->
        <li><a class="link" href="./3dmodels-list.html">所蔵一覧</a></li>
        <li><a class="link" href="./index.html">Top page</a></li>
      </ul>
      <!-- 表示義務は無し
      <h6>jQueryプラグイン：<a href="http://git.blivesta.com/drawer/">Drawer</a></h6> -->
      <h6 class="center">All contents copyright (C) kcg.edu.<br>
        Copyrights Hand's On Museum Inc.<br>
        All Rights Reserved.</h6>
      </nav>
      <!-- ドロワーメニューここまで -->

      <script type="text/javascript">
      // ここからスマホ挙動の調整
      // "passive" が使えるかどうかを検出 */
      var passiveSupported = false;
      try {
        document.addEventListener("test", null, Object.defineProperty({}, "passive", {
          get: function() {
            passiveSupported = true;
          }
        }));
      } catch(err) {}
      // リスナーを登録
      document.addEventListener("touchmove", function listener(e) {
        /* do something */
        e.preventDefault();
      }, passiveSupported ? { passive: false } : false);
      // スマホ画面での挙動調整ここまで

      //チェックボックスの複数選択不可化
      $(".checkbox").on("click", function(){
        $(".checkbox").prop("checked", false);
        $(this).prop("checked", true);
        // 『説明』が押された時のポップアップ表示
        if($("input[name=radio]:eq(1)").prop("checked")){
          alert("メーカー：IBM社(米)　製造年：1975年\n使用校舎：洛北校,京都駅前校\n● IBM360の後継機(IC採用)\n● 仮想記憶方式(VM)\n● 端末：370/138 40台,370/158 50台\n● アドレッシング：32ビット\n● 利用言語：FORTRAN,COBOL\n\nSystem360シリーズの後継機として登場。360シリーズとの互換性を保ち、2つのプロセッサ構成を標準化し、仮想記憶(VM)の完全サポート、128ビット浮動小数点演算を取り入れる。この仮想計算機の概念は、後にインテル社(米)のi80386のマイクロプロセッサでの仮想86モードとして取り入れられている。本学では、実習機としてバッチ処理(紙カード)およびオンラインTSS端末処理のメインフレームとして活躍した。System370/138、158(CPU UNIT)および一部の入出力装置と共に展示している。");
        };
      });


      //ドロワーメニュー
      $(document).ready(function() {
        $(".drawer").drawer();
      });
      // ドロワーメニューここまで


      //確認用
      // console.log("フラウザの外側の幅：" + window.outerWidth + "ピクセル<br>");
      // console.log("フラウザの外側の高さ：" + window.outerHeight + "ピクセル<br>");
      // console.log("フラウザのコンテンツ領域の幅：" + window.innerWidth + "ピクセル<br>");
      // console.log("フラウザのコンテンツ領域の高さ：" + window.innerHeight + "ピクセル<br>");


      /* ここからWebGLの処理を記述 */
      //シーンを作成
      var scene = new THREE.Scene();

      //カメラを作成
      var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
      camera.position.z = 9;

      //カメラコントローラーを作成
      const controls = new THREE.OrbitControls(camera);

      //ここから3Dモデル生成のコード
      //物体1(PC本体)
      //メッシュを作成（ジオメトリとマテリアルを元にメッシュを作成）
      var geometry_1 = new THREE.BoxGeometry( 4, 7, 6);
      var materials_1 =[];
      materials_1[0] = new THREE.MeshBasicMaterial({color:0x4682B4});
      materials_1[1] = new THREE.MeshBasicMaterial({color:0x4682B4});
      materials_1[2] = new THREE.MeshBasicMaterial({color:0x1E1E20});
      materials_1[3] = new THREE.MeshBasicMaterial({color:0x000000});
      materials_1[4] = new THREE.MeshBasicMaterial({color:0x000000});
      materials_1[5] = new THREE.MeshBasicMaterial({color:0x4682B4});
      var material_1 = new THREE.MeshFaceMaterial(materials_1);
      var mesh_1 = new THREE.Mesh( geometry_1, material_1 );
      //表示位置の設定
      mesh_1.position.set(0,0,0);
      //シーンに追加
      scene.add(mesh_1);

      //物体2(PC前部)
      //メッシュを作成（ジオメトリとマテリアルを元にメッシュを作成）
      var geometry_2 = new THREE.BoxGeometry( 4, 7, 0.4);
      var materials_2 =[];
      materials_2[0] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_2[1] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_2[2] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_2[3] = new THREE.MeshBasicMaterial({color:0x000000});
      materials_2[4] = new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("textures/kcg-003_m2_5.png")});
      materials_2[5] = new THREE.MeshBasicMaterial({color:0x000000});
      var material_2 = new THREE.MeshFaceMaterial(materials_2);
      var mesh_2 = new THREE.Mesh( geometry_2, material_2 );
      //表示位置の設定
      mesh_2.position.set(0,0,3.2);
      //シーンに追加
      scene.add(mesh_2);

      //物体3(PC上部の看板)
      //メッシュを作成（ジオメトリとマテリアルを元にメッシュを作成）
      var geometry_3 = new THREE.BoxGeometry( 4, 0.5, 0.2);
      var materials_3 =[];
      materials_3[0] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_3[1] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_3[2] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_3[3] = new THREE.MeshBasicMaterial({color:0x1E1E20});
      materials_3[4] = new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("textures/kcg-003_m3_5.png")});
      materials_3[5] = new THREE.MeshBasicMaterial({color:0x5C534E});
      var material_3 = new THREE.MeshFaceMaterial(materials_3);
      var mesh_3 = new THREE.Mesh( geometry_3, material_3 );
      //表示位置の設定
      mesh_3.position.set(0,3.9,3.1);
      //シーンに追加
      scene.add(mesh_3);

      //物体4(PC上部の看板への支柱)
      //メッシュを作成（ジオメトリとマテリアルを元にメッシュを作成）
      var geometry_4 = new THREE.BoxGeometry( 0.1, 0.2, 0.2);
      var materials_4 =[];
      materials_4[0] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_4[1] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_4[2] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_4[3] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_4[4] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_4[5] = new THREE.MeshBasicMaterial({color:0x5C534E});
      var material_4 = new THREE.MeshFaceMaterial(materials_4);
      var mesh_4 = new THREE.Mesh( geometry_4, material_4 );
      //表示位置の設定
      mesh_4.position.set(1.32,3.55,3.1);
      //シーンに追加
      scene.add(mesh_4);

      //物体5(PC上部の看板への支柱)
      //メッシュを作成（ジオメトリとマテリアルを元にメッシュを作成）
      var geometry_5 = new THREE.BoxGeometry( 0.1, 0.2, 0.2);
      var materials_5 =[];
      materials_5[0] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_5[1] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_5[2] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_5[3] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_5[4] = new THREE.MeshBasicMaterial({color:0x5C534E});
      materials_5[5] = new THREE.MeshBasicMaterial({color:0x5C534E});
      var material_5 = new THREE.MeshFaceMaterial(materials_5);
      var mesh_5 = new THREE.Mesh( geometry_5, material_5 );
      //表示位置の設定
      mesh_5.position.set(-1.32,3.55,3.1);
      //シーンに追加
      scene.add(mesh_5);

      //ここまでが3Dモデル生成のコード　生成物により変更


      //レンダラに渡す
      var renderer = new THREE.WebGLRenderer();
      renderer.setSize( window.innerWidth,window.innerHeight );
      renderer.setClearColor(0xefff8dc, 1.0);  //初期 クリーム色

      //bodyへ追加し、表示
      document.body.appendChild(renderer.domElement);
      //console.log(renderer.domElement);
      //アニメーションさせる
      var animate = function(){
        requestAnimationFrame(animate);
        // mesh.rotation.x += 0.05;
        // mesh.rotation.y += 0.06;
        renderer.render( scene, camera );
      };
      animate();
      //３Dモデル作成,描画に関する項目ここまで


      //画面回転等でリサイズがあった場合の挙動
      //初期化
      onResize();

      //リサイズイベント発生時に実行
      window.addEventListener('resize', onResize);

      function onResize() {  // サイズを取得
        var width = window.innerWidth;
        var height = window.innerHeight;

        // レンダラのサイズを調整する
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(width, height);

        // カメラのアスペクト比を正す
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
      }
      //画面サイズ変更に関する項目ここまで


      //背景色が変更された時の挙動
      $(function(){
        $('input[name="radio_bgcolor"]:radio').change(function(){
          var radio_color = $(this).val();
          if(radio_color == "#fff8dc"){
            $("#title").removeClass("bg-lightblue")
            $("#title").removeClass("bg-black")
            $("#title").addClass("bg-cream")
          }
          if(radio_color == "#f0f8ff"){
            $("#title").removeClass("bg-cream")
            $("#title").removeClass("bg-black")
            $("#title").addClass("bg-lightblue")
          }
          console.log();
          renderer.setClearColor(radio_color, 1.0);  //変更された背景色
          if(radio_color == "#000000"){   //背景色が黒の時は文字色を白にする
            $("#operation-manual").addClass("whitecoolor");
            $("#description").addClass("whitecoolor");
            $("#op_label").addClass("whitecoolor");
            $("#desc_label").addClass("whitecoolor");
            $("#hide_label").addClass("whitecoolor");
            $("#title").addClass("whitecoolor");
            $("#title").removeClass("bg-cream")
            $("#title").removeClass("bg-lightblue")
            $("#title").addClass("bg-black");
          }else{  //それ以外の色に変わったらクラスを消す
            $("#operation-manual").removeClass("whitecoolor");
            $("#description").removeClass("whitecoolor");
            $("#op_label").removeClass("whitecoolor");
            $("#desc_label").removeClass("whitecoolor");
            $("#hide_label").removeClass("whitecoolor");
            $("#title").removeClass("whitecoolor");
          }
        })
      })
      //背景色に関する項目ここまで

      </script>

    </body>
    </html>
